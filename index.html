<!--ジェネT長袖選択ページ-->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeneT Order</title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
  <!-- セレクトボックス拡張（キャッシュ回避のためクエリ付与） -->
  <link rel="stylesheet" href="dist/css/dd.css?v=1">

  <!-- ★ 余白を詰めるためのCSS（Bootstrapのmt-3等は!importantなので、こちらも!importantで上書き） -->
  <style>
    .form-compact p{ margin:6px 0 !important; }
    .form-compact .selectbox{ margin-bottom:8px !important; }
    .form-compact .form-check{ margin:6px 0 4px !important; }
    .form-compact .note{
      font-size:0.82rem; line-height:1.2; margin:2px 0 8px !important; color:#666;
    }
    .form-compact .submit_button{ margin-top:8px !important; }
    @media (max-width:420px){
      .form-compact .note{ font-size:0.78rem; margin:2px 0 6px !important; }
      .form-compact p{ margin:4px 0 !important; }
    }
  </style>
  <!-- （任意）キャッシュ強制更新： -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
</head>

<body>
    <form class="w-75 mx-auto form-compact">
        <p class="mt-3">色(長袖)</p>
        <select class="selectbox" name ="colorNum" is="ms-dropdown" required>
            <option hidden value="">選択してください</option>
            <option value="'001" data-image="dist/images/icons/001.png">001　ホワイト</option>
            <option value="'003" data-image="dist/images/icons/003.png">003　杢グレー</option>
            <option value="'014" data-image="dist/images/icons/014.png">014　パープル</option>
            <option value="'037" data-image="dist/images/icons/037.png">037　アーミーグリーン</option>
            <option value="'005" data-image="dist/images/icons/005.png">005　ブラック</option>
            <option value="'165" data-image="dist/images/icons/165.png">165　デイジー</option>
            <option value="'015" data-image="dist/images/icons/015.png">015　オレンジ</option>
            <option value="'010" data-image="dist/images/icons/010.png">010　レッド</option>
            <option value="'112" data-image="dist/images/icons/112.png">112　バーガンディ</option>
            <option value="'132" data-image="dist/images/icons/132.png">132　ライトピンク</option>
            <option value="'032" data-image="dist/images/icons/032.png">032　ロイヤルブルー</option>
            <option value="'031" data-image="dist/images/icons/031.png">031　ネイビー</option>
            <option value="'999" >辞退します</option>
        </select>
        
        <p class="mt-3">長袖・半袖</p>
        <p id="selected_size">※長袖が選択されています※</p>
        
        <p class="mt-3">デザイン</p>
        <select class="selectbox" name="design" is="ms-dropdown" required>
            <option hidden value="">選択してください</option>
            <option value="logo" data-image="dist\images\icons\logo2.png">ロゴ</option>            
<!--            <option value="21" data-image="dist\images\icons\shinkiba2.png">2021年版</option>-->
<!--            <option value="22" data-image="dist\images\icons\ichikawa2.png">2022年版</option>-->
<!--            <option value="23" data-image="dist\images\icons\osaka2.png">2023年版</option>-->
<!--            <option value="24" data-image="dist\images\icons\newdesignTBD2.png">2024年版</option>-->
            <option value="25" data-image="dist\images\icons\newdesignTBD2.png">2025年版</option>
            
        </select>
        <p class="link" style="margin-top:0px;">色もしくはサイズに「辞退します」が<br>含まれると辞退になります。</p>
        <p class="mt-3">サイズ(長袖)<a class="link" style="margin-left:10px;" href="https://tomsj.com/ebook/25ss/html5m.html#page=30" target="_blank">サイズ・色見本はこちら</a></p>
        <select class="selectbox" name="size" is="ms-dropdown" required>
            <option hidden value="">選択してください</option>
            <option value="110">110</option>
            <option value="130">130</option>
            <option value="150">150</option>
            <option value="XS">XS</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="2XL">2XL</option>
            <option value="3XL">3XL</option>                
            <option value="辞退" >辞退します</option>
        </select>
        <!-- ★ 自費チェックはこの位置（サイズのすぐ下）を推奨。隙間はCSSで詰める -->
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="own" name="own" value="OWN">
          <label class="form-check-label" for="own">自費で購入する</label>
        </div>

    <!-- ★ 注意書きは小さく・詰めたクラス note を使用 -->
    <p class="note">※「辞退します」と自費購入は同時に選べません</p>

    <input type="submit" class="submit_button btn btn-primary" value="カゴに入れる">
    </form>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script src="dist/js/dd.min.js"></script>
    
    <script>

        $(document).ready(function () {
            const liffId = "1657365828-3o8WY9rY";
            initializeLiff(liffId);
        })

        function initializeLiff(liffId) {
            liff.init({
                liffId: liffId
            }).then(() => {
                initializeApp();
            }).catch((err) => {
                console.log('LIFF Initialization failed ', err);
            });
        }

        function sendText(text) {
            liff.sendMessages([{
                'type': 'text',
                'text': text
            }]).then(function () {
                liff.closeWindow();
            }).catch(function (error) {
                window.alert('Failed to send message ' + error);
            });
        }

        const params = (new URL(document.location)).searchParams;
        const key = params.get('key');

        $(function () {
          $('form').submit(function () {
              const commandName = "オーダー";
              const colorNum = $('[name="colorNum"]').val();
              const long_short  = "long";
              const design  = $('[name="design"]').val();
              const size = $('[name="size"]').val();
              const own = $('#own').prop('checked') ? 'OWN' : '';

              const isDecline = (String(colorNum).replace(/^'/,'') === '999') || (size === '辞退');
              if (isDecline && own) {
                alert('「辞退します」と「自費購入」は同時に選べません。選択を修正してください。');
                return false;
              }

              const msg = `${commandName}\n${colorNum}\n${long_short}\n${design}\n${size}\n${own}`;
              sendText(msg);
              return false;
            });
        });

    </script>

</body>
</html>





